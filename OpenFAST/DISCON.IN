! Controller parameter input file for the NREL15mw_OpenFAST_prelim_v4 wind turbine
!    - File written using NREL Reference Controller tuning logic on 10/18/19

!------- DEBUG ------------------------------------------------------------
1					! LoggingLevel		- {0: write no debug files, 1: write standard output .dbg-file, 2: write standard output .dbg-file and complete avrSWAP-array .dbg2-file

!------- CONTROLLER FLAGS -------------------------------------------------
1					! F_LPFType			- {1: first-order low-pass filter, 2: second-order low-pass filter}, [rad/s] (currently filters generator speed and pitch control signals)
0					! F_NotchType		- Notch on the measured generator speed {0: disable, 1: enable} 
0					! IPC_ControlMode	- Turn Individual Pitch Control (IPC) for fatigue load reductions (pitch contribution) {0: off, 1: 1P reductions, 2: 1P+2P reductions}
2					! VS_ControlMode	- Generator torque control mode in above rated conditions {0: constant torque, 1: constant power, 2: TSR tracking PI control}
1                   ! PC_ControlMode    - Blade pitch control mode {0: No pitch, fix to fine pitch, 1: active PI blade pitch control}
0					! Y_ControlMode		- Yaw control mode {0: no yaw control, 1: yaw rate control, 2: yaw-by-IPC}
1                   ! SS_Mode           - Setpoint Smoother mode {0: no setpoint smoothing, 1: introduce setpoint smoothing}
2                   ! WE_Mode           - Wind speed estimator mode {0: One-second low pass filtered hub height wind speed, 1: Imersion and Invariance Estimator (Ortega et al.)}
0                   ! PS_Mode           - Peak shaving mode {0: no peak shaving, 1: implement peak shaving}

!------- FILTERS ----------------------------------------------------------
0					! F_LPFDamping		- Damping coefficient [used only when F_FilterType = 2]
0					! F_NotchCornerFreq	- Natural frequency of the notch filter, [rad/s]
0	0				! F_NotchBetaNumDen	- Two notch damping values (numerator and denominator, resp) - determines the width and depth of the notch, [-]
0.5                 ! F_SSCornerFreq    - Corner frequency (-3dB point) in the first order low pass filter for the setpoint smoother, [Hz].

!------- BLADE PITCH CONTROL ----------------------------------------------
28                  ! PC_GS_n			- Amount of gain-scheduling table entries
0.0			        ! PC_MinPit			- Minimum physical pitch limit, [rad].
0.0349				! PC_MaxRat			- Maximum pitch rate (in absolute value) in pitch controller, [rad/s].
-0.0349			    ! PC_MinRat			- Minimum pitch rate (in absolute value) in pitch controller, [rad/s].
0.785124007078545			        ! PC_RefSpd			- Desired (reference) HSS speed for pitch controller, [rad/s].
0.0					! PC_FinePit		- Record 5: Below-rated pitch angle set-point, [rad]
0.003490658			! PC_Switch			- Angle above lowest minimum pitch angle for switch, [rad]
0					! Z_EnableSine		- Enable/disable sine pitch excitation, used to validate for dynamic induction control, will be removed later, [-]
0.0349066			! Z_PitchAmplitude	- Amplitude of sine pitch excitation, [rad]
0					! Z_PitchFrequency	- Frequency of sine pitch excitation, [rad/s]

!------- INDIVIDUAL PITCH CONTROL -----------------------------------------
0.0			        ! IPC_IntSat		- Integrator saturation (maximum signal amplitude contribution to pitch from IPC), [rad]
0.0 0.0				! IPC_KI			- Integral gain for the individual pitch controller: first parameter for 1P reductions, second for 2P reductions, [-]
0.0	0.0		        ! IPC_aziOffset		- Phase offset added to the azimuth angle for the individual pitch controller, [rad]. 
0.0					! IPC_CornerFreqAct - Corner frequency of the first-order actuators model, to induce a phase lag in the IPC signal {0: Disable}, [rad/s]

!------- VS TORQUE CONTROL ------------------------------------------------
93.0                ! VS_GenEff			- Generator efficiency mechanical power -> electrical power, [should match the efficiency defined in the generator properties!], [-]
20543292.667970784  ! VS_ArSatTq		- Above rated generator torque PI control saturation, [Nm]
1500000.0			! VS_MaxRat			- Maximum torque rate (in absolute value) in torque controller, [Nm/s].
22597621.934767865	! VS_MaxTq			- Maximum generator torque in Region 3 (HSS side), [Nm].
0.0					! VS_MinTq			- Minimum generator (HSS side), [Nm].
0.0				    ! VS_MinOMSpd		- Optimal mode minimum speed, cut-in speed towards optimal mode gain path, [rad/s]
380144456685.5331 	! VS_Rgn2K			- Generator torque constant in Region 2 (HSS side), [N-m/(rad/s)^2]
15000000			! VS_RtPwr			- Wind turbine rated power [W]
20543292.667970784	! VS_RtTq			- Rated torque, [Nm].
0.785124007078545	! VS_RefSpd			- Rated generator speed [rad/s]
1					! VS_n				- Number of generator PI torque controller gains
-53084854.669		! VS_KP				- Proportional gain for generator PI torque controller [1/(rad/s) Nm]. (Only used in the transitional 2.5 region if VS_ControlMode =/ 2)
-3719695.282	 	! VS_KI				- Integral gain for generator PI torque controller [1/rad Nm]. (Only used in the transitional 2.5 region if VS_ControlMode =/ 2)
9.5	 			    ! VS_TSRopt			- Power-maximizing region 2 tip-speed-ratio [rad].

!------- SETPOINT SMOOTHER ---------------------------------------------
1                   ! SS_VSGainBias     - Variable speed torque controller gain bias, [(rad/s)/rad].
0.001               ! SS_PCGainBias     - Collective pitch controller gain bias, [(rad/s)/Nm].

!------- WIND SPEED ESTIMATOR ---------------------------------------------
120.0				! WE_BladeRadius	- Blade length [m]
4					! WE_CP_n			- Amount of parameters in the Cp array
0.0 0.0 0.0 0.0	    ! WE_CP - Parameters that define the parameterized CP(lambda) function
0.0					! WE_Gamma			- Adaption gain of the wind speed estimator algorithm [m/rad]
1.0					! WE_GearboxRatio	- Gearbox ratio [>=1],  [-]
371969528.218		! WE_Jtot			- Total drivetrain inertia, including blades, hub and casted generator inertia to LSS, [kg m^2]
1.225				! WE_RhoAir			- Air density, [kg m^-3]
"Cp_Ct_Cq.txt"      ! PerfFileName      - File containing rotor performance tables (Cp,Ct,Cq)
52 29               ! PerfTableSize     - Size of rotor performance tables, first number refers to number of blade pitch angles, second number referse to number of tip-speed ratios
42                  ! WE_FOPoles_N      - Number of first-order system poles used in EKF
 4.    4.5   5.    5.5   6.    6.5   7.    7.5   8.    8.5   9.    9.5 10.   10.5  11.27 11.77 12.27 12.77 13.27 13.77 14.27 14.77 15.27 15.77 16.27 16.77 17.27 17.77 18.27 18.77 19.27 19.77 20.27 20.77 21.27 21.77 22.27 22.77 23.27 23.77 24.27 24.77                  ! WE_FOPoles_v      - Wind speeds corresponding to first-order system poles [m/s]
-0.02182365 -0.02455161 -0.02727957 -0.03000752 -0.03273548 -0.03546344 -0.03819139 -0.04091935 -0.0436473  -0.04637526 -0.04910322 -0.05183117 -0.05455913 -0.05728709 -0.03795063 -0.04197317 -0.04888257 -0.05762879 -0.06761733 -0.07853071 -0.09018904 -0.10249173 -0.11528511 -0.12861726 -0.14231744 -0.15643416 -0.1709296  -0.18575448 -0.2008983  -0.21639998 -0.23215511 -0.24824658 -0.26456444 -0.28115737 -0.2980643  -0.31521176 -0.33257751 -0.3502057  -0.36799312 -0.38603454 -0.40427949 -0.42277138                  ! WE_FOPoles        - First order system poles

!------- YAW CONTROL ------------------------------------------------------
0.0			        ! Y_ErrThresh		- Yaw error threshold. Turbine begins to yaw when it passes this. [rad^2 s]
0.0				    ! Y_IPC_IntSat		- Integrator saturation (maximum signal amplitude contribution to pitch from yaw-by-IPC), [rad]
1					! Y_IPC_n			- Number of controller gains (yaw-by-IPC)
0.0				    ! Y_IPC_KP			- Yaw-by-IPC proportional controller gain Kp
0.0				    ! Y_IPC_KI			- Yaw-by-IPC integral controller gain Ki
0.0			        ! Y_IPC_omegaLP		- Low-pass filter corner frequency for the Yaw-by-IPC controller to filtering the yaw alignment error, [rad/s].
0.0					! Y_IPC_zetaLP		- Low-pass filter damping factor for the Yaw-by-IPC controller to filtering the yaw alignment error, [-].
0.0			        ! Y_MErrSet			- Yaw alignment error, set point [rad]
0.0					! Y_omegaLPFast		- Corner frequency fast low pass filter, 1.0 [Hz]
0.0			        ! Y_omegaLPSlow		- Corner frequency slow low pass filter, 1/60 [Hz]
0.0			        ! Y_Rate			- Yaw rate [rad/s]

!------- TOWER FORE-AFT DAMPING -------------------------------------------
-1					! FA_KI				- Integral gain for the fore-aft tower damper controller, -1 = off / >0 = on [rad s/m] - !NJA - Make this a flag
0.0                 ! FA_HPF_CornerFreq	- Corner frequency (-3dB point) in the high-pass filter on the fore-aft acceleration signal [rad/s]
0.0			        ! FA_IntSat			- Integrator saturation (maximum signal amplitude contribution to pitch from FA damper), [rad]

!------- PEAK SHAVING -------------------------------------------
42                  ! PS_BldPitchMin_N  - Number of values in minimum blade pitch lookup table (should equal number of values in PS_WindSpeeds and PS_BldPitchMin)
 4.    4.5   5.    5.5   6.    6.5   7.    7.5   8.    8.5   9.    9.5 10.   10.5  11.27 11.77 12.27 12.77 13.27 13.77 14.27 14.77 15.27 15.77 16.27 16.77 17.27 17.77 18.27 18.77 19.27 19.77 20.27 20.77 21.27 21.77 22.27 22.77 23.27 23.77 24.27 24.77                  ! PS_WindSpeeds       - Wind speeds corresponding to minimum blade pitch angles [m/s]
-0.01745329 -0.01745329 -0.01745329 -0.01745329 -0.01745329 -0.01745329 -0.01745329 -0.01745329 -0.01745329 -0.01745329 -0.01745329  0.01548792  0.04194089  0.0624422   0.07195639  0.08317697  0.09401956  0.10456197  0.11483791  0.12491166  0.13481089  0.14455607  0.15416184  0.16364229  0.17300915  0.18226688  0.19143092  0.20050296  0.20948104  0.21837524  0.227191    0.2359356   0.24460403  0.25320419  0.26174361  0.27020485  0.27861461  0.28695892  0.295246    0.30346892  0.31163424  0.31974712                  ! PS_BldPitchMin          - Minimum blade pitch angles [rad]
